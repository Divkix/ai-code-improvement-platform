# ============================================================================
# PRODUCTION SECURITY WARNING
# ============================================================================
# NEVER use these example values in production!
# All secrets MUST be strong, unique, randomly generated values.
#
# Minimum security requirements:
# - JWT_SECRET: 32+ characters, cryptographically random
# - MONGO_ROOT_PASSWORD: 32+ characters, random alphanumeric + symbols
# - NEO4J_PASSWORD: 16+ characters, random alphanumeric + symbols
# - QDRANT_API_KEY: 32+ characters, cryptographically random
# - GITHUB_ENCRYPTION_KEY: Exactly 16, 24, or 32 bytes for AES encryption
# - All API keys: Use actual service credentials
#
# Generate strong secrets with:
#   openssl rand -base64 32
#   openssl rand -hex 16
# ============================================================================

# ---------------------------
# Server Configuration
# ---------------------------
PORT=8080
HOST=0.0.0.0
GIN_MODE=debug            # debug | release | test

# ---------------------------
# Logging
# ---------------------------
LOG_LEVEL=info             # debug | info | warn | error (default: info)
LOG_FORMAT=json            # json | text (default: json for production)
LOG_OUTPUT=stdout          # stdout | stderr (default: stdout)

# ---------------------------
# Database Configuration
# ---------------------------

# --- MongoDB --------------
# PRODUCTION: Use strong credentials! Never use 'admin'/'password' in production!
# Example connection string with auth:
# MONGODB_URI=mongodb://admin:STRONG_PASSWORD_HERE@mongodb:27017/acip?authSource=admin
MONGODB_URI=mongodb://mongodb:27017/acip
DB_NAME=acip

# MongoDB Authentication (REQUIRED for production)
MONGO_ROOT_USER=admin
MONGO_ROOT_PASSWORD=change-this-secure-mongodb-password-min-32-chars  # PRODUCTION: Generate with 'openssl rand -base64 32'

# MongoDB Connection Pooling
MONGODB_MAX_POOL_SIZE=100           # Max connections in pool (default: 100)
MONGODB_MIN_POOL_SIZE=5             # Min connections in pool (default: 5)
MONGODB_MAX_IDLE_TIME=30s           # Max connection idle time (default: 30s)
MONGODB_CONNECT_TIMEOUT=10s         # Connection timeout (default: 10s)
MONGODB_SERVER_SELECTION_TIMEOUT=5s # Server selection timeout (default: 5s)

# --- Qdrant Vector DB -----
QDRANT_URL=http://localhost:6334
QDRANT_COLLECTION_NAME=codechunks
VECTOR_DIMENSION=1024                 # Acceptable: 256 | 512 | 768 | 1024 | 2048
ENABLE_QDRANT_REPO_FILTER=true        # true by default

# Qdrant API Key (REQUIRED for production)
# PRODUCTION: Generate with 'openssl rand -base64 32'
# For local development without Docker, leave empty
QDRANT_API_KEY=change-this-secure-qdrant-api-key-min-32-chars

# --- Neo4j Graph DB -------
NEO4J_URI=bolt://neo4j:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=change-this-secure-neo4j-password-min-16-chars  # PRODUCTION: Generate with 'openssl rand -base64 24'

# ---------------------------
# Security & Authentication
# ---------------------------

# JWT Secret (REQUIRED)
# PRODUCTION: Generate with 'openssl rand -base64 32' - minimum 32 characters!
JWT_SECRET=change-this-super-secret-jwt-key-min-32-chars-for-production

# GitHub OAuth & Repository Import
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# GitHub Token Encryption (REQUIRED for GitHub integration)
# PRODUCTION: Must be exactly 16, 24, or 32 bytes for AES encryption
# Generate with: openssl rand -hex 16  (for 16 bytes)
# Generate with: openssl rand -hex 24  (for 24 bytes)
# Generate with: openssl rand -hex 32  (for 32 bytes)
GITHUB_ENCRYPTION_KEY=          # 16/24/32-byte AES key (hex-encoded)

# GitHub Import Settings
GITHUB_BATCH_SIZE=50            # files per batch (default: 50)
GITHUB_MAX_FILE_SIZE=1048576    # max file size in bytes (default: 1MB)

# ---------------------------
# AI & Embedding Services
# ---------------------------
# Point BASE_URL to any OpenAI-compatible /v1/embeddings endpoint (OpenAI, Voyage, Groq, LM-Studioâ€¦).
# For local models, use: http://host.docker.internal:1234/v1

EMBEDDING_BASE_URL=https://api.openai.com/v1
EMBEDDING_MODEL=voyage-code-3
EMBEDDING_API_KEY=                    # REQUIRED: Your embedding service API key
CHUNK_SIZE=30                         # lines per chunk (default: 30 for local, 150 for Voyage AI)
CHUNK_OVERLAP_SIZE=10                 # overlap lines (default: 10 for local, 50 for Voyage AI)
EMBEDDING_BATCH_SIZE=50               # chunks per batch (default: 50)
EMBEDDING_WORKERS_NUM=3               # concurrent embedding workers (default: 3)

# ---------------------------
# LLM (Chat Completion)
# ---------------------------
# For local models, use: http://host.docker.internal:1234/v1
LLM_BASE_URL=https://api.openai.com/v1
LLM_MODEL=gpt-4o-mini
LLM_API_KEY=                          # REQUIRED: Your LLM service API key
LLM_REQUEST_TIMEOUT=30s
LLM_CONTEXT_LENGTH=32000              # max context tokens (default: 32000)
MAX_PROMPT_LENGTH=12000               # prompt truncation limit (default: 12000)
CHAT_CONTEXT_CHUNKS=8                 # chunks per chat query (default: 8)
CHAT_VECTOR_WEIGHT=0.7                # vector vs text search weight (default: 0.7)

# ---------------------------
# Timeout Configuration
# ---------------------------
# Default timeouts for various operations
HTTP_READ_TIMEOUT=30s
HTTP_WRITE_TIMEOUT=30s
HTTP_IDLE_TIMEOUT=120s
SHUTDOWN_TIMEOUT=30s

# ---------------------------
# Frontend Configuration
# ---------------------------

# Base URL of the backend (no trailing slash)
VITE_API_URL=http://localhost:8080

# ---- Optional public variables (must start with PUBLIC_) ----
# PUBLIC_APP_VERSION=1.2.0
